sequenceDiagram
    actor User
    User ->> Waiting System: generate token req
    activate Waiting System
    Waiting System -->> User: token
    deactivate Waiting System
    User ->> Reservation: send (token + event_id + seat_ids)
    activate Reservation
    Reservation ->> Waiting System: validate token

    activate Waiting System
    Waiting System -->> Reservation: validation
    deactivate Waiting System
    Reservation -->> User: reserved tickets (5 minutes Lock)
    deactivate Reservation

    User ->> Reservation: Send Payment req
    activate Reservation
    Reservation ->> Reservation: payment process
    Reservation ->> Waiting System: send payment result
    activate Waiting System
    Reservation -->> User: payment result response
    deactivate Reservation
    Waiting System ->> Waiting System: remove this waiting queue
    deactivate Waiting System


